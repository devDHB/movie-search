<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: url("../assets/bg.png") center/cover no-repeat;
            min-height: 100vh;
            background-color: rgb(175, 231, 231);
        }

        header {
            background-color: #ffe194;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px 0;
            margin: 0;
        }

        .search {
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 20px 0;
            border-bottom: 1px solid black;
        }

        .search label {
            font-size: 25px;
        }

        .search input {
            margin-left: 20px;
            min-width: 200px;
            padding: 5px 10px;
        }

        .search button {
            margin-left: 10px;
            padding: 5px;
        }

        #card-container {
            width: 60%;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
        }

        #card-box {
            background-color: rgb(233, 233, 233);
            width: 200px;
            height: 280px;
            border-radius: 20px;
            text-align: center;
            margin: 0 auto;
        }

        #card-img {
            height: 180px;
        }

        #card-title {
            padding-top: 10px;
            font-weight: bold;
        }

        #card-overview {
            height: 40px;
            vertical-align: middle;
        }

        #card-grade {
            height: 40px;
            vertical-align: middle;
        }
    </style>
    <title>내배캠 최고 평점 영화</title>
</head>

<body>
    <header>
        <h1>내배캠 최고 평점 영화 콜렉션</h1>
    </header>
    <div class="search">
        <label>영화 검색 : </label>
        <input type="text" id="search-input" placeholder="영화 제목을 검색해 보세요" />
        <button type="submit" id="search-btn" onclick="search()">검색</button>
    </div>
    <div class="mycards">
        <div class="row row-cols-1 row-cols-md-4 g-4" id="cards-box">

            <script>
                const card_id = document.querySelector('.button_box');
                const options = {
                    method: 'GET',
                    headers: {
                        accept: 'application/json',
                        Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1NmQ2MDljY2M4YTk2OGQ4NmY3MDY5MGE5MmU3ZWMwMCIsInN1YiI6IjY0NzA4YTIwNzcwNzAwMDExOTI0ODFmYyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.5NjHTZbzSO0wzPIHy0BTBCKG3LvrIYUl4GMa0h1E5VE'
                    }
                };

                fetch('https://api.themoviedb.org/3/movie/top_rated?language=en-US&page=1', options)
                    .then(response => response.json()).then(data => {
                        let rows = data['results']
                        rows.forEach((a) => {
                            let title = a['title']
                            let overview = a['overview']
                            let img = a['poster_path']
                            let grade = a['vote_average']
                            let id = a['id']

                            let temp_html = `<div class="col" onclick="select(${id})">
                          <div class="card h-100">
                           <img src="https://image.tmdb.org/t/p/original/${img}"
                            class="card-img-top">
                              <div class="card-body">
                             <h5 id="movie_title" class="card-title">${title}</h5>
                             <p class="card-text">${overview}</p>
                              <p>${grade}</p>
                                </div>
                                 </div>
                                  </div>`
                            document.querySelector("#cards-box").insertAdjacentHTML("beforeend", temp_html)
                        })
                    })
                    .catch(err => console.error(err));

                fetch('https://api.themoviedb.org/3/movie/top_rated?language=en-US&page=1', options)
                    .then(response => response.json()).then(data => {
                        let rows = data['results']
                        console.log(data['results'])
                        rows.forEach((a) => {
                            let title = a['title']
                            function search() {
                                const input_name =
                                    document.getElementById("search-input").value

                            }
                        })
                    })

                function select(id) {
                    alert(`영화 id : ${id}`);
                }

            </script>
</body>

</html>