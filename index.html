<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        body {
            min-height: 100vh;
            background-color: white;
        }

        .title {
            background-color: #ffe194;
            display: flex;
            justify-content: center;
            align-items: center;
            
        }

        .search {
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 20px 0;
            border-bottom: 1px solid black;
            font-size: 25px;
        }
    
        .search input {
            margin-left: 20px;
        }

        .search button {
            margin-left: 10px;
        }
        .cards-box{
           display: grid;
           grid-template-columns: 1fr 1fr 1fr 1fr;
           
        }
        
        .card_list{
            margin: 20px auto;
            padding: 20px;
            width: 250px;
            background-color: rgb(48, 43, 43);
        }
        

        
        .card-img{
            width: 100%;
            border-radius: 70%;
        }
        .card-title{
            color: white;
        }
        .card-text{
            color: white;
        }
        .card-grade{
            color: white;
        }


        
    </style>
    <title>내배캠 최고 평점 영화</title>
</head>

<body>
    <div class="title">
        <h1>내배캠 최고 평점 영화 콜렉션</h1>
    </div>
    <div class="search">
        <label>영화 검색 : </label>
        <input type="text" id="search-input" placeholder="영화 제목을 검색해 보세요" />
        <button type="submit" id="search-btn" onclick="search()">검색</button>
    </div>
        <div class="cards-box" id="cards-box">

            <script>
               const options = {
                    method: 'GET',
                    headers: {
                        accept: 'application/json',
                        Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1NmQ2MDljY2M4YTk2OGQ4NmY3MDY5MGE5MmU3ZWMwMCIsInN1YiI6IjY0NzA4YTIwNzcwNzAwMDExOTI0ODFmYyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.5NjHTZbzSO0wzPIHy0BTBCKG3LvrIYUl4GMa0h1E5VE'
                    }
                };

                fetch('https://api.themoviedb.org/3/movie/top_rated?language=en-US&page=1', options)
                    .then(response => response.json()).then(data => {
                        let rows = data['results']
                        rows.forEach((a) => {
                            let title = a['title']
                            let overview = a['overview']
                            let img = a['poster_path']
                            let grade = a['vote_average']
                            let id = a['id']

                            let temp_html = `<div class="card_list" onclick="select(${id})">
                                            <img src="https://image.tmdb.org/t/p/original/${img}"
                                            class="card-img">
                                            <h5 id="movie_title" class="card-title">${title}</h5>
                                            <p class="card-text">${overview}</p>
                                            <p class="card-grade">${grade}</p>
                                            </div>`
                            document.querySelector("#cards-box").insertAdjacentHTML("beforeend", temp_html)
                        })
                    })
                    .catch(err => console.error(err));

                function search() {
                    const search_Input = document.querySelector('#search-input');
                    const search_word = search_Input.value.toLowerCase();
                    const movie_list = document.querySelectorAll('.card_list');

                    movie_list.forEach((a) => {
                        const movie_title = a.querySelector("#movie_title").textContent.toLowerCase();
                                          
                        if (movie_title.indexOf(search_word) !== -1) {
                            a.style.display='block';   
                        }
                         else {
                            a.style.display='none';
                        }
                    })
                }




                function select(id) {
                    alert(`영화 id : ${id}`);
                }

            </script>
</body>

</html>
